# è´¡çŒ®æŒ‡å— (Contributing Guide)

æ„Ÿè°¢ä½ å¯¹ **E-Health Management** é¡¹ç›®çš„å…³æ³¨ï¼æœ¬æ–‡æ¡£æ—¨åœ¨å¸®åŠ©å¼€å‘è€…äº†è§£é¡¹ç›®ç»“æ„ã€æŠ€æœ¯å®ç°ç»†èŠ‚ä»¥åŠå¦‚ä½•å‚ä¸è´¡çŒ®ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„ (Project Structure)

é¡¹ç›®é‡‡ç”¨æ ‡å‡†çš„ Electron + Vue 3 ç»“æ„ï¼Œä¸»è¦ç›®å½•å¦‚ä¸‹ï¼š

```text
e-health-management/
â”œâ”€â”€ dist/                     # æ„å»ºè¾“å‡ºç›®å½• (æ¸²æŸ“è¿›ç¨‹)
â”œâ”€â”€ dist-electron/            # æ„å»ºè¾“å‡ºç›®å½• (ä¸»è¿›ç¨‹)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                 # [ä¸»è¿›ç¨‹] è´Ÿè´£ç³»ç»Ÿäº¤äº’ã€çª—å£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts          # åº”ç”¨å…¥å£ï¼šæ‰˜ç›˜ã€è®¡æ—¶å™¨ã€IPCç›‘å¬
â”‚   â”‚   â””â”€â”€ store.ts          # æœ¬åœ°å­˜å‚¨ï¼šåŸºäº JSON çš„é…ç½®æŒä¹…åŒ–
â”‚   â”œâ”€â”€ preload/              # [é¢„åŠ è½½è„šæœ¬]
â”‚   â”‚   â””â”€â”€ index.ts          # IPC å®‰å…¨æ¡¥æ¢ï¼Œæš´éœ² API ç»™æ¸²æŸ“è¿›ç¨‹
â”‚   â””â”€â”€ renderer/             # [æ¸²æŸ“è¿›ç¨‹] Vue å‰ç«¯ç•Œé¢
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/   # UI ç»„ä»¶ (Settings, Break)
â”‚       â”‚   â”œâ”€â”€ App.vue       # æ ¹ç»„ä»¶ï¼Œè´Ÿè´£è·¯ç”±åˆ†å‘
â”‚       â”‚   â””â”€â”€ main.ts       # Vue å…¥å£
â”‚       â””â”€â”€ index.html        # é¡µé¢å…¥å£
â”œâ”€â”€ electron-builder.json5    # æ‰“åŒ…é…ç½®æ–‡ä»¶
â”œâ”€â”€ vite.config.ts            # Vite æ„å»ºé…ç½®
â””â”€â”€ package.json              # é¡¹ç›®ä¾èµ–ä¸è„šæœ¬
```

## ğŸ§© æ ¸å¿ƒæ¨¡å—è¯´æ˜ (Core Modules)

### 1. ä¸»è¿›ç¨‹ (Main Process)
- **æ‰˜ç›˜ç®¡ç† (`src/main/index.ts`)**: ä½¿ç”¨ `Tray` API åˆ›å»ºç³»ç»Ÿæ‰˜ç›˜ï¼Œå¤„ç†å³é”®èœå•äº‹ä»¶ã€‚
- **è®¡æ—¶é€»è¾‘**: åœ¨ä¸»è¿›ç¨‹ç»´æŠ¤ä¸€ä¸ª `setInterval` å®šæ—¶å™¨ï¼Œæ¯ç§’æ›´æ–° `currentWorkTime`ã€‚å½“è¾¾åˆ°é˜ˆå€¼æ—¶è§¦å‘ä¼‘æ¯çª—å£ã€‚
- **çª—å£ç®¡ç†**: é‡‡ç”¨å•ä¾‹æ¨¡å¼ç®¡ç† `SettingsWindow` å’Œ `BreakWindow`ã€‚`BreakWindow` è¢«é…ç½®ä¸º `alwaysOnTop: "screen-saver"` ä»¥ç¡®ä¿å¼ºåˆ¶æ€§ã€‚

### 2. æ¸²æŸ“è¿›ç¨‹ (Renderer Process)
- **UI æ¡†æ¶**: ä½¿ç”¨ `TDesign Vue Next` æ„å»ºç°ä»£åŒ–ç•Œé¢ã€‚
- **è·¯ç”±æœºåˆ¶**: ç”±äºæ˜¯å•é¡µåº”ç”¨ä¸” Electron ç¯å¢ƒç‰¹æ®Šï¼Œé‡‡ç”¨ç®€å•çš„ Hash è·¯ç”± (`#settings`, `#break`) æ¥åˆ‡æ¢è§†å›¾ã€‚
- **é€šä¿¡**: é€šè¿‡ `window.electron` å¯¹è±¡è°ƒç”¨ä¸»è¿›ç¨‹èƒ½åŠ›ï¼ˆè·å–é…ç½®ã€åœæ­¢ä¼‘æ¯ç­‰ï¼‰ã€‚

### 3. æ•°æ®å­˜å‚¨ (Store)
- å®ç°äº†è½»é‡çº§çš„ `Store` ç±»ï¼Œå°†é…ç½®ä¿å­˜ä¸º `AppData/config.json`ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨æ•°æ®åº“ã€‚

## ğŸ’» å¼€å‘æŒ‡å— (Development)

### è„šæœ¬è¯´æ˜ (Scripts)

| å‘½ä»¤ | è¯´æ˜ |
| --- | --- |
| `pnpm install` | å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆä¸¥æ ¼ä½¿ç”¨ pnpmï¼‰ |
| `pnpm dev` | å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ŒåŒ…å«ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„çƒ­æ›´æ–° |
| `pnpm build` | æ‰§è¡Œç±»å‹æ£€æŸ¥å¹¶æ„å»ºç”Ÿäº§ç¯å¢ƒä»£ç  |
| `pnpm preview` | é¢„è§ˆæ„å»ºåçš„äº§ç‰© |

### é€‚é…æ€§æµ‹è¯• (Compatibility)

- **Windows**: ç¡®ä¿æ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºæ­£å¸¸ï¼Œå…¨å±çª—å£èƒ½è¦†ç›–ä»»åŠ¡æ ã€‚
- **macOS**: ç¡®ä¿ Dock å›¾æ ‡è¢«éšè— (`app.dock.hide()`)ï¼Œä»…ä¿ç•™é¡¶éƒ¨èœå•æ å›¾æ ‡ã€‚

## ğŸ¤ è´¡çŒ®æµç¨‹ (Workflow)

1. **Fork æœ¬ä»“åº“**: ç‚¹å‡»å³ä¸Šè§’çš„ Fork æŒ‰é’®ã€‚
2. **åˆ›å»ºåˆ†æ”¯**: 
   ```bash
   git checkout -b feature/AmazingFeature
   ```
3. **æäº¤æ›´æ”¹**:
   - éµå¾ª Conventional Commits è§„èŒƒ (e.g., `feat: add dark mode`, `fix: timer bug`).
   - ä»£ç é£æ ¼è¯·å‚è€ƒé¡¹ç›®ä¸­çš„ ESLint/Prettier é…ç½®ã€‚
4. **æ¨é€åˆ°åˆ†æ”¯**:
   ```bash
   git push origin feature/AmazingFeature
   ```
5. **æäº¤ Pull Request**: åœ¨ GitHub ä¸Šå‘èµ· PRï¼Œå¹¶æè¿°ä½ çš„æ›´æ”¹å†…å®¹ã€‚

## ğŸ“ ä»£ç è§„èŒƒ (Code Style)

- **TypeScript**: ä¸¥æ ¼æ¨¡å¼ (`strict: true`)ï¼Œé¿å…ä½¿ç”¨ `any` ç±»å‹ã€‚
- **Vue**: ä½¿ç”¨ Composition API (`<script setup>`)ã€‚
- **æ³¨é‡Š**: å…³é”®é€»è¾‘å¿…é¡»åŒ…å«ä¸­æ–‡æ³¨é‡Šã€‚

## ğŸ› é—®é¢˜åé¦ˆ (Issue Reporting)

å¦‚æœä½ å‘ç°äº† bug æˆ–æœ‰æ–°åŠŸèƒ½å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues æäº¤ã€‚æäº¤æ—¶è¯·æ³¨æ˜ï¼š
- æ“ä½œç³»ç»Ÿç‰ˆæœ¬
- å¤ç°æ­¥éª¤
- é¢„æœŸè¡Œä¸ºä¸å®é™…è¡Œä¸º
