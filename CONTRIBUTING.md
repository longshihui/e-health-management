# è´¡çŒ®æŒ‡å— (Contributing Guide)

æ„Ÿè°¢ä½ å¯¹ **E-Health Management** é¡¹ç›®çš„å…³æ³¨ï¼æœ¬æ–‡æ¡£æ—¨åœ¨å¸®åŠ©å¼€å‘è€…äº†è§£é¡¹ç›®ç»“æ„ã€æŠ€æœ¯å®ç°ç»†èŠ‚ä»¥åŠå¦‚ä½•å‚ä¸è´¡çŒ®ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„ (Project Structure)

é¡¹ç›®é‡‡ç”¨æ ‡å‡†çš„ Electron + Vue 3 ç»“æ„ï¼Œä¸»è¦ç›®å½•å¦‚ä¸‹ï¼š

```text
e-health-management/
â”œâ”€â”€ dist/                     # æ„å»ºè¾“å‡ºç›®å½• (æ¸²æŸ“è¿›ç¨‹)
â”œâ”€â”€ dist-electron/            # æ„å»ºè¾“å‡ºç›®å½• (ä¸»è¿›ç¨‹)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                 # [ä¸»è¿›ç¨‹] è´Ÿè´£ç³»ç»Ÿäº¤äº’ã€çª—å£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts          # åº”ç”¨å…¥å£ï¼šæ‰˜ç›˜ã€è®¡æ—¶å™¨ã€IPCç›‘å¬
â”‚   â”‚   â””â”€â”€ store.ts          # æœ¬åœ°å­˜å‚¨ï¼šåŸºäº JSON çš„é…ç½®æŒä¹…åŒ–
â”‚   â”œâ”€â”€ preload/              # [é¢„åŠ è½½è„šæœ¬]
â”‚   â”‚   â””â”€â”€ index.ts          # IPC å®‰å…¨æ¡¥æ¢ï¼Œæš´éœ² API ç»™æ¸²æŸ“è¿›ç¨‹
â”‚   â””â”€â”€ renderer/             # [æ¸²æŸ“è¿›ç¨‹] Vue å‰ç«¯ç•Œé¢
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/   # UI ç»„ä»¶ (Settings, Break)
â”‚       â”‚   â”œâ”€â”€ App.vue       # æ ¹ç»„ä»¶ï¼Œè´Ÿè´£è·¯ç”±åˆ†å‘
â”‚       â”‚   â””â”€â”€ main.ts       # Vue å…¥å£
â”‚       â””â”€â”€ index.html        # é¡µé¢å…¥å£
â”œâ”€â”€ electron-builder.json5    # æ‰“åŒ…é…ç½®æ–‡ä»¶
â”œâ”€â”€ vite.config.ts            # Vite æ„å»ºé…ç½®
â””â”€â”€ package.json              # é¡¹ç›®ä¾èµ–ä¸è„šæœ¬
```

### ç›®å½•ç»„ç»‡è§„èŒƒ (Directory Organization)

- **æŒ‰åŠŸèƒ½åŒºåˆ†**: ç›®å½•ç»“æ„åº”æŒ‰ç…§åŠŸèƒ½æ¨¡å—è¿›è¡ŒåŒºåˆ†ã€‚
- **å°±è¿‘åŸåˆ™**: å¦‚æœæŸä¸ªç»„ä»¶ã€ç»„åˆå¼å‡½æ•°ï¼ˆcomposableï¼‰æˆ–å…¶ä»–ç‰©æ–™ä»…åœ¨ç‰¹å®šåŠŸèƒ½æ¨¡å—ä¸­ä½¿ç”¨ï¼Œåº”å°†å…¶æ”¾ç½®åœ¨è¯¥åŠŸèƒ½æ¨¡å—çš„ç›®å½•ä¸‹ï¼Œå¹¶æŒ‰ç‰©æ–™ç±»å‹ï¼ˆå¦‚ `components`, `composables`ï¼‰å»ºç«‹å­æ–‡ä»¶å¤¹ã€‚
- **å…¬å…±èµ„æº**: åªæœ‰è·¨é¡µé¢/è·¨åŠŸèƒ½å¤ç”¨çš„èµ„æºæ‰åº”æ”¾ç½®åœ¨å…¨å±€çš„ `src/renderer/src/components` æˆ– `src/renderer/src/composables` ç›®å½•ä¸‹ã€‚

### ç±»å‹å®šä¹‰è§„èŒƒ (Type Definitions)

- **ç»Ÿä¸€ç®¡ç†**: è·¨ç»„ä»¶ã€è·¨æ¨¡å—ï¼ˆå¦‚ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹å…±äº«ï¼‰ä½¿ç”¨çš„ç±»å‹å®šä¹‰ï¼Œå¿…é¡»ç»Ÿä¸€æ”¾ç½®åœ¨ `src/types` ç›®å½•ä¸‹ã€‚
- **æ–‡ä»¶å‘½å**: ç»Ÿä¸€ä½¿ç”¨ `index.d.ts` æˆ–æ ¹æ®æ¨¡å—æ‹†åˆ†ä¸ºå¤šä¸ª `.d.ts` æ–‡ä»¶ã€‚
- **é¿å…é‡å¤**: ç¦æ­¢åœ¨å¤šä¸ªæ–‡ä»¶ä¸­é‡å¤å®šä¹‰ç›¸åŒçš„æ¥å£ï¼Œåº”é€šè¿‡ `import` å¯¼å…¥ä½¿ç”¨ã€‚

## ğŸ§© æ ¸å¿ƒæ¨¡å—è¯´æ˜ (Core Modules)

### 1. ä¸»è¿›ç¨‹ (Main Process)
- **æ‰˜ç›˜ç®¡ç† (`src/main/index.ts`)**: ä½¿ç”¨ `Tray` API åˆ›å»ºç³»ç»Ÿæ‰˜ç›˜ï¼Œå¤„ç†å³é”®èœå•äº‹ä»¶ã€‚
- **è®¡æ—¶é€»è¾‘**: åœ¨ä¸»è¿›ç¨‹ç»´æŠ¤ä¸€ä¸ª `setInterval` å®šæ—¶å™¨ï¼Œæ¯ç§’æ›´æ–° `currentWorkTime`ã€‚å½“è¾¾åˆ°é˜ˆå€¼æ—¶è§¦å‘ä¼‘æ¯çª—å£ã€‚
- **çª—å£ç®¡ç†**: é‡‡ç”¨å•ä¾‹æ¨¡å¼ç®¡ç† `SettingsWindow` å’Œ `BreakWindow`ã€‚`BreakWindow` è¢«é…ç½®ä¸º `alwaysOnTop: "screen-saver"` ä»¥ç¡®ä¿å¼ºåˆ¶æ€§ã€‚

### 2. æ¸²æŸ“è¿›ç¨‹ (Renderer Process)
- **UI æ¡†æ¶**: ä½¿ç”¨ `TDesign Vue Next` æ„å»ºç°ä»£åŒ–ç•Œé¢ã€‚
- **è·¯ç”±æœºåˆ¶**: ç”±äºæ˜¯å•é¡µåº”ç”¨ä¸” Electron ç¯å¢ƒç‰¹æ®Šï¼Œé‡‡ç”¨ç®€å•çš„ Hash è·¯ç”± (`#settings`, `#break`) æ¥åˆ‡æ¢è§†å›¾ã€‚
- **é€šä¿¡**: é€šè¿‡ `window.electron` å¯¹è±¡è°ƒç”¨ä¸»è¿›ç¨‹èƒ½åŠ›ï¼ˆè·å–é…ç½®ã€åœæ­¢ä¼‘æ¯ç­‰ï¼‰ã€‚

### 3. æ•°æ®å­˜å‚¨ (Store)
- å®ç°äº†è½»é‡çº§çš„ `Store` ç±»ï¼Œå°†é…ç½®ä¿å­˜ä¸º `AppData/config.json`ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨æ•°æ®åº“ã€‚

## ğŸ’» å¼€å‘æŒ‡å— (Development)

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- pnpm >= 8.0.0

### å¿«é€Ÿå¼€å§‹ (Quick Start)

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/e-health-management.git
cd e-health-management

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. å¯åŠ¨å¼€å‘æ¨¡å¼
pnpm dev

# 4. æ„å»ºç”Ÿäº§åŒ…
pnpm build
```

### è„šæœ¬è¯´æ˜ (Scripts)

| å‘½ä»¤           | è¯´æ˜                                       |
| -------------- | ------------------------------------------ |
| `pnpm install` | å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆä¸¥æ ¼ä½¿ç”¨ pnpmï¼‰              |
| `pnpm dev`     | å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ŒåŒ…å«ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„çƒ­æ›´æ–° |
| `pnpm build`   | æ‰§è¡Œç±»å‹æ£€æŸ¥å¹¶æ„å»ºç”Ÿäº§ç¯å¢ƒä»£ç              |
| `pnpm preview` | é¢„è§ˆæ„å»ºåçš„äº§ç‰©                           |

### é€‚é…æ€§æµ‹è¯• (Compatibility)

- **Windows**: ç¡®ä¿æ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºæ­£å¸¸ï¼Œå…¨å±çª—å£èƒ½è¦†ç›–ä»»åŠ¡æ ã€‚
- **macOS**: ç¡®ä¿ Dock å›¾æ ‡è¢«éšè— (`app.dock.hide()`)ï¼Œä»…ä¿ç•™é¡¶éƒ¨èœå•æ å›¾æ ‡ã€‚

## ğŸ¤ è´¡çŒ®æµç¨‹ (Workflow)

1. **Fork æœ¬ä»“åº“**: ç‚¹å‡»å³ä¸Šè§’çš„ Fork æŒ‰é’®ã€‚
2. **åˆ›å»ºåˆ†æ”¯**: 
   ```bash
   git checkout -b feature/AmazingFeature
   ```
3. **æäº¤æ›´æ”¹**:
   - **è‡ªåŠ¨åŒ–æ ¡éªŒ**: æœ¬é¡¹ç›®é›†æˆäº† `husky` å’Œ `commitlint`ï¼Œåœ¨æäº¤æ—¶ä¼šè‡ªåŠ¨æ ¡éªŒ Commit Message æ ¼å¼ã€‚
   - **è¾…åŠ©å·¥å…·**: æ¨èä½¿ç”¨ `pnpm commit` å‘½ä»¤ï¼Œå®ƒä¼šå¼•å¯¼ä½ ç”Ÿæˆç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚
   - **è§„èŒƒè¦æ±‚ (Conventional Commits)**:
     - æ ¼å¼: `type(scope): subject`
     - ç¤ºä¾‹: `feat(core): add tray icon support`
     - **Type**: å¿…é¡»ä¸º `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore` ä¹‹ä¸€ã€‚
     - **Subject**: é•¿åº¦ä¸è¶…è¿‡ 50 å­—ç¬¦ï¼Œå…¨å°å†™ï¼Œç»“å°¾ä¸åŠ å¥å·ã€‚
   - **ä»£ç è´¨é‡**: æäº¤å‰ä¼šè‡ªåŠ¨è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥å’Œ ESLint æ ¡éªŒï¼Œè¯·ç¡®ä¿ `pnpm lint` å’Œ `pnpm type-check` é€šè¿‡ã€‚

4. **æ¨é€åˆ°åˆ†æ”¯**:
   ```bash
   git push origin feature/AmazingFeature
   ```
5. **æäº¤ Pull Request**: åœ¨ GitHub ä¸Šå‘èµ· PRï¼Œå¹¶æè¿°ä½ çš„æ›´æ”¹å†…å®¹ã€‚

## ğŸ“ ä»£ç è§„èŒƒ (Code Style)

- **TypeScript**: ä¸¥æ ¼æ¨¡å¼ (`strict: true`)ï¼Œé¿å…ä½¿ç”¨ `any` ç±»å‹ã€‚
- **Vue**: ä½¿ç”¨ Composition API (`<script setup>`)ã€‚
- **æ³¨é‡Š**: å…³é”®é€»è¾‘å¿…é¡»åŒ…å«ä¸­æ–‡æ³¨é‡Šã€‚

## ğŸ› é—®é¢˜åé¦ˆ (Issue Reporting)

å¦‚æœä½ å‘ç°äº† bug æˆ–æœ‰æ–°åŠŸèƒ½å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues æäº¤ã€‚æäº¤æ—¶è¯·æ³¨æ˜ï¼š
- æ“ä½œç³»ç»Ÿç‰ˆæœ¬
- å¤ç°æ­¥éª¤
- é¢„æœŸè¡Œä¸ºä¸å®é™…è¡Œä¸º
